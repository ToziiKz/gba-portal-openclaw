- Dashboard ACL hardening pass (coach access): added server-side role gating in `gba-portal/src/middleware.ts` for sensitive routes (`/dashboard/acces`, `/dashboard/validations`, `/dashboard/staff` admin-only; `/dashboard/licences`, `/dashboard/stock`, `/dashboard/relances` staff+), with redirect to `/dashboard` when unauthorized/inactive.
- Fixed coach scoping regressions: `equipes`, `joueurs`, `presences` now enforce team scope for non-admin/staff; removed coach club-wide toggle in Presences UI and filtered server query by `viewableTeamIds`.
- Strengthened coach team assignment flow in `src/app/dashboard/acces/actions.ts`: force profile to `role=coach` + `is_active=true`, sync `teams.coach_id` and legacy `staff_team_memberships`, and verify post-write assigned count to detect partial assignment.
- Root-cause mitigation for inconsistent permissions/navbar: normalized role parsing (`trim().toLowerCase()`) in `dashboard/layout`, `DashboardShell`, `getDashboardScope`, and middleware to prevent unexpected role strings from bypassing checks or breaking coach scope labels.
- Validation status: targeted ESLint checks passed on modified files; full `npm run build` passed after each hardening step.

## 2026-02-14 — Polish & nettoyage complet (post-compaction)
- Demande utilisateur: "polsh et nettoie complètement maintenant" sur `gba-portal`.
- Exécution terminée: passe de nettoyage TypeScript/ESLint sur modules dashboard (categories, convocations, licences, stock, staff, rapports, players, roster).
- Résultat qualité validé: `npm run build` OK (Next.js 16.1.6, proxy/middleware OK).
- Résultat lint validé en mode strict: `npm run lint -- --max-warnings=0` passe.
- État communiqué à l’utilisateur: phase de polish/clôture prête.
